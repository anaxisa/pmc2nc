library(pmc2nc)
library(rentrez)
library(progress)
library(RMariaDB)
con_mysql = dbConnect(MariaDB(), group = "CPP")
res1 <- get_pmc_cited_in(con_mysql, 21876761)
e1 <- generateEdgeList(res1)
source('~/pmc2nc/R/insertEdgeList.R')
library(pmc2nc)
library(rentrez)
library(progress)
library(RMariaDB)
con_mysql = dbConnect(MariaDB(), group = "CPP")
res1 <- get_pmc_cited_in(con_mysql, 21876761)
e1 <- generateEdgeList(res1)
library(pmc2nc)
library(rentrez)
library(progress)
library(RMariaDB)
con_mysql = dbConnect(MariaDB(), group = "CPP")
res1 <- get_pmc_cited_in(con_mysql, 21876761)
e1 <- generateEdgeList(res1)
library(pmc2nc)
library(rentrez)
library(progress)
library(RMariaDB)
con_mysql = dbConnect(MariaDB(), group = "CPP")
devtools::load_all("/home/mz/pmc2nc/")
dbDisconnect(con_mysql)
devtools::load_all("/home/mz/pmc2nc/")
library(pmc2nc)
library(rentrez)
library(progress)
library(RMariaDB)
con_mysql = dbConnect(MariaDB(), group = "CPP")
res1 <- get_pmc_cited_in(con_mysql, 21876761)
res1 <- get_pmc_cited_in(con_mysql, 21876761)
res1 <- get_pmc_cited_in(con_mysql, 21876761)
dbDisconnect(con_mysql)
dbDisconnect(con_mysql)
devtools::load_all("/home/mz/pmc2nc/")
library(pmc2nc)
library(rentrez)
library(progress)
library(RMariaDB)
con_mysql = dbConnect(MariaDB(), group = "CPP")
res1 <- get_pmc_cited_in(con_mysql, 21876761)
e1 <- generateEdgeList(res1)
res3 <- get_pmc_cited_in(23840566)
res1 <- get_pmc_cited_in(con_mysql, 21876761)
roxygen2::roxygenise()
roxygen2::roxygenise()
library(rentrez)
library(progress)
library(RMariaDB)
con_mysql = dbConnect(MariaDB(), group = "CPP")
res1 <- get_pmc_cited_in(con_mysql, 21876761)
e1 <- generateEdgeList(res1)
insertEdgeList(con_mysql, e1)
roxygen2::roxygenise()
devtools::load_all("/home/mz/pmc2nc/")
?insertEdgeList
roxygen2::roxygenise()
# making packages
library(devtools)
devtools::load_all("/home/mz/pmc2nc/")
library(rentrez)
library(progress)
library(RMariaDB)
devtools::load_all("/home/mz/pmc2nc/")
res1 <- get_pmc_cited_in(con_mysql, 21876761)
con_mysql = dbConnect(MariaDB(), group = "CPP")
res1 <- get_pmc_cited_in(con_mysql, 21876761)
res1 <- get_pmc_cited_in(con_mysql, 21876761)
e1 <- generateEdgeList(res1)
View(e1)
insertEdgeList(e1)
insertEdgeList(con_mysql,e1)
db_pmids <- combineEdgeList(con_mysql)
combineEdgeList <- function(con_mysql, new_edgelist = "0", db_pmids = "('465','21876761')", table_name = "edgelist", target_name = "target_pmid"){
qry <- paste0("SELECT * FROM ",table_name," WHERE ",target_name," in ",db_pmids,";")
res <- dbGetQuery(con_mysql, qry)
}
db_pmids <- combineEdgeList(con_mysql)
View(db_pmids)
View(e1)
View(db_pmids)
total <- merge(e1,db_pmids)
View(total)
total <- rbind(e1,db_pmids)
total <- rbind(e1,db_pmids)
View(total)
total <- "1"
total <- rbind(e1,db_pmids)
total <- rbind(db_pmids,db_pmids)
View(total)
roxygen2::roxygenise()
db_pmids <- c(34343, 3434 ,3434)
db_pmids <- paste0(db_pmids, collapse = ",")
print(db_pmids)
db_pmids <- paste0("(",db_pmids,")")
print(db_pmids)
?check_pmids_in_db
library(devtools)
devtools::load_all("/home/mz/pmc2nc/")
roxygen2::roxygenise()
?check_pmids_in_db
library(rentrez)
library(progress)
library(RMariaDB)
library(devtools)
devtools::load_all("/home/mz/pmc2nc/")
con_mysql = dbConnect(MariaDB(), group = "CPP")
pmids <- c(21876761, 311, 29463753, 21876726)
res1 <- get_pmc_cited_in(con_mysql, pmids)
e1 <- generateEdgeList(res1)
View(e1)
insertEdgeList(con_mysql, e1)
pmids <- c(21876761, 311, 29463753, 21876726)
pmids <- paste0(pmids, collapse = ",")
pmids <- paste0("(",pmids,")")
print(pmids)
# SELECT * FROM edgelist WHERE target in (21876761, 311, 29463753, 21876726)
qry <- paste0("SELECT * FROM ",table_name," WHERE ",target_name," in ",pmids,";")
table_name <- "edgelist"
target_name <- "target"
# SELECT * FROM edgelist WHERE target in (21876761, 311, 29463753, 21876726)
qry <- paste0("SELECT * FROM ",table_name," WHERE ",target_name," in ",pmids,";")
print(qry)
library(RMariaDB)
con_mysql = dbConnect(MariaDB(), group = "CPP")
View(con_mysql)
if(con_mysql = RMARIADB::MARIADBConnection){
print("true maria")
}else{
print("not maria")
}
if(con_mysql == RMARIADB::MARIADBConnection){
print("true maria")
}else{
print("not maria")
}
if(is(con_mysql, MARIADBConnection)){
print("true maria")
}else{
print("not maria")
}
if(is(con_mysql, MariaDBConnection)){
print("true maria")
}else{
print("not maria")
}
if(is(con_mysql, MariaDBConnection)){
print("true maria")
}else{
print("not maria")
}
if(is(con_mysql, RMariaDB)){
print("true maria")
}else{
print("not maria")
}
library(RMariaDB)
con_mysql = dbConnect(MariaDB(), group = "CPP")
if(is(con_mysql, RMariaDB)){
print("true maria")
}else{
print("not maria")
}
if(is(con_mysql, RMariaDB::MariaDBConnection)){
print("true maria")
}else{
print("not maria")
}
if(is(con_mysql, RMariaDB::MariaDBConnection())){
print("true maria")
}else{
print("not maria")
}
if(is(con_mysql, "MariaDBConnection"){
print("true maria")
}else{
print("not maria")
}
if(is(con_mysql, "MariaDBConnection")){
print("true maria")
}else{
print("not maria")
}
if(is(con_mysql, "RMariaDB")){
print("true maria")
}else{
print("not maria")
}
if(is(con_mysql, "MariaDBConnection")){
print("true maria")
}else{
print("not maria")
}
is.Date(as.Date("2009-08-03"))
?is.date
??is.data.frame
?isdate
??isdate
?IsDate
?IsDate
?is.numeric.Date
?as.date
is.numeric.Date("2009-08-03")
is.numeric.Date(2009-08-03)
is.numeric.Date("2009-08-03")
is.numeric.Date(as.Date("2009-08-03"))
?date.format
?as.Date
as.date("2009-08-03", "%y-%m-%d")
as.Date("2009-08-03", "%y-%m-%d")
as.Date("6aug2005", "%y-%m-%d")
sdate1 <- "6aug2005"
ndate1 <- as.Date(sdate1, "%d%B%Y"); ndate1
as.Date("6aug2005", "%y-%m-%d")
date <- "2009-08-03"
d <- try( as.Date( date, format= "%d-%m-%Y %H:%M:%S" ) )
if( class( d ) == "try-error" || is.na( d ) ) print( "That wasn't correct!" )
d <- try( as.Date( date, format= "%y-%m-%d" ) )
if( class( d ) == "try-error" || is.na( d ) ) print( "That wasn't correct!" )
date <- "2009-08-03"
d <- try( as.Date( date, format= "%y-%m-%d" ) )
if( class( d ) == "try-error" || is.na( d ) ) print( "That wasn't correct!" )
d <- try( as.Date( date, format= "%y%m%d" ) )
if( class( d ) == "try-error" || is.na( d ) ) print( "That wasn't correct!" )
IsDate <- function(mydate, date.format = "%d/%m/%y") {
tryCatch(!is.na(as.Date(mydate, date.format)),
error = function(err) {FALSE})
}
date<- c('12/05/2016','35/11/2067','12/52/1000')
IsDate(date)
date<- c("12/05/2016",'35/11/2067',"12/52/1000")
IsDate(date)
date<- c("12/05/2016",'35/11/2067',"12/52/1000","2009-08-03")
IsDate(date)
IsDate <- function(mydate, date.format = "%y-%m-%d") {
tryCatch(!is.na(as.Date(mydate, date.format)),
error = function(err) {FALSE})
}
date<- c("12/05/2016",'35/11/2067',"12/52/1000","2009-08-03")
IsDate(date)
IsDate <- function(mydate, date.format = "%Y-%M-%D") {
tryCatch(!is.na(as.Date(mydate, date.format)),
error = function(err) {FALSE})
}
#date will looking up when was update
#date but no edge list mean no edge list fond when searched.
library(rentrez)
IsDate(date)
IsDate <- function(mydate, date.format = "%Y-%m-%d") {
tryCatch(!is.na(as.Date(mydate, date.format)),
error = function(err) {FALSE})
}
IsDate(date)
date <- "2009-08-03"
IsDate(date)
date <- "09-08-03"
IsDate(date)
date <- "09-08-03"
IsDate(date)
date <- "08-03"
IsDate(date)
date <- "2323/08/03"
IsDate(date)
date <- "2323-08-03"
IsDate(date)
date <- "2323-08-99"
IsDate(date)
date <- "2323-9-1"
IsDate(date)
?is.na
IsDate <- function(mydate, date.format = "%Y-%m-%d") {
tryCatch(!is.na(mydate <- as.Date(mydate, date.format)),
error = function(err) {FALSE})
}
IsDate(date)
IsDate <- function(mydate, date.format = "%Y-%m-%d") {
tryCatch((mydate <- as.Date(mydate, date.format)),
error = function(err) {FALSE})
}
IsDate(date)
date <- "09-01-1"
IsDate <- function(mydate, date.format = "%Y-%m-%d") {
tryCatch((mydate <- as.Date(mydate, date.format)),
error = function(err) {FALSE})
}
IsDate(date)
date <- "209-01-1"
#date will looking up when was update
#date but no edge list mean no edge list fond when searched.
library(rentrez)
IsDate(date)
date <- "209-01-1000"
IsDate(date)
date <- "209-01-9999"
IsDate(date)
?stop
isDate <- function(mydate, date.format = "%Y-%m-%d") {
tryCatch(!is.na(as.Date(mydate, date.format)),
error = function(err) {FALSE})
}
date<- c("12/05/2016",'35/11/2067',"12/52/1000", "2009-08-03","jan082009")
IsDate(date)
IsDate <- function(mydate, date.format = "%d/%m/%y") {
tryCatch(!is.na(as.Date(mydate, date.format)),
error = function(err) {FALSE})
}
IsDate(date)
isDate <- function(mydate, date.format = "%Y-%m-%d") {
tryCatch(!is.na(as.Date(mydate, date.format)),
error = function(err) {FALSE})
}
isDate(date)
date<- c("12/05/2016",'35/11/2067',"2009/10/21", "2009-08-03","jan082009")
isDate(date)
date<- c("12/05/2016",'35/11/2067',"2009/10/21", "2009-08-03","jan-08-2009")
isDate(date)
date<- c("12/05/2016",'35/11/2067',"2009/10/21", "20090803","jan-08-2009")
isDate(date)
date<- c("12/05/2016",'35/11/2067',"2009/10/21", "101010","jan-08-2009")
isDate(date)
date<- c("12/05/2016",'35/11/2067',"2009/10/21", "2001121","jan-08-2009")
isDate(date)
date<- c("12/05/2016",'35/11/2067',"2009/10/21", "20011021","jan-08-2009")
isDate(date)
date<- c("12/05/2016",'35/11/2067',"2009/10/21", "2001-10-21","jan-08-2009")
isDate(date)
date<- c("12/05/2016",'35/11/2067',"2009/10/21", "01-10-21","jan-08-2009")
isDate(date)
isDate <- function(mydate, date.format = "%Y-%m-%d") {
tryCatch((as.Date(mydate, date.format)),
error = function(err) {FALSE})
}
date<- c("12/05/2016",'35/11/2067',"2009/10/21", "01-10-21","jan-08-2009")
isDate(date)
isDate <- function(mydate, date.format = "%Y%m%d") {
tryCatch((as.Date(mydate, date.format)),
error = function(err) {FALSE})
}
date<- c("12/05/2016",'35/11/2067',"2009/10/21", "01-10-21","jan-08-2009")
isDate(date)
isDate <- function(mydate, date.format = "%Y-%m-%d") {
tryCatch((as.Date(mydate, date.format)),
error = function(err) {FALSE})
}
date<- "2001-10-21"
isDate(date)
isDate <- function(mydate, date.format = "%Y-%m-%d") {
tryCatch((as.Date(mydate, date.format)),
error = function(err) {FALSE})
}
date<- c("12/05/2016",'35/11/2067',"2009/10/21", "01-10-21","jan-08-2009")
isDate(date)
date<- "2001-10-21"
isDate(date)
date<- "2001-10-50"
isDate(date)
date<- "fhdsghsgdf"
isDate(date)
IsDate <- function(mydate, date.format = "%d/%m/%y") {
tryCatch(!is.na(as.Date(mydate, date.format)),
error = function(err) {FALSE})
}
isDate(date)
isDate <- function(mydate, date.format = "%d/%m/%y") {
tryCatch(!is.na(as.Date(mydate, date.format)),
error = function(err) {FALSE})
}
isDate(date)
date<- "01-10-21"
isDate(date)
isDate(date)
date<- "01-10-21"
isDate(date)
date<- "2001-10-21"
isDate(date)
isDate <- function(mydate, date.format = "%Y-%m-%d") {
tryCatch((as.Date(mydate, date.format)),
error = function(err) {FALSE})
}
isDate <- function(mydate, date.format = "%Y-%m-%d") {
tryCatch(!is.na(as.Date(mydate, date.format)),
error = function(err) {FALSE})
}
isDate(date)
isDate <- function(mydate, date.format = "%Y-%m-%d") {
res <- as.Date(mydate, date.format)
}
date<- "2001-10-21"
isDate(date)
isDate <- function(mydate, date.format = "%Y-%m-%d") {
res <- as.Date(mydate, date.format)
}
date<- "2001-10-21"
isDate(date)
isDate <- function(mydate, date.format = "%Y-%m-%d") {
res <- as.Date(mydate, date.format)
}
date<- "2001-10-21"
isDate(date)
print(isDate(date))
date<- "241465651651651"
print(isDate(date))
isDate <- function(mydate, date.format = "%Y-%m-%d") {
res <- as.Date(mydate, date.format)
if(is.na(res)){
res <- FALSE
}
}
date<- "241465651651651"
print(isDate(date))
date<- "2001-10-99"
print(isDate(date))
date<- "2001-10-09"
print(isDate(date))
print(isDate(date))
date<- "2001-10-09"
print(isDate(date))
isDate <- function(mydate, date.format = "%Y-%m-%d") {
res <- as.Date(mydate, date.format)
if(is.na(res)){
res <- FALSE
}
}
date<- "2001-10-09"
print(isDate(date))
isDate <- function(mydate, date.format = "%Y-%m-%d") {
res <- as.Date(mydate, date.format)
}
date<- "2001-10-09"
print(isDate(date))
isDate <- function(mydate, date.format = "%Y-%m-%d") {
res <- as.Date(mydate, date.format)
if(is.na(res)){
res <- FALSE
}
res
}
date<- "2001-10-09"
print(isDate(date))
date<- "2001-10-99"
print(isDate(date))
date<- "2001-10-99"
print(isDate(date))
date<- "2001-10-9"
print(isDate(date))
date<- "2001-10-9"
print(isDate(date))
date<- "2001-10-09"
print(isDate(date))
date<- "2001-10-99"
print(isDate(date))
date<- "2001-10-9"
print(isDate(date))
date<- "2001-1-9"
print(isDate(date))
get_pmids_date <- function(con_mysql = "0", lastupdate, table_name = "edgelist_date", date_name = "DatePMID"){
qry <- paste0("SELECT * FROM ",table_name," WHERE ",date_name," > '",lastupdate,"';")
#res <- dbGetQuery(con_mysql, qry)
}
date<- "2001-1-9"
get_pmids_date(isDate(date))
get_pmids_date(,isDate(date))
get_pmids_date(,isDate(date))
Print(get_pmids_date(,isDate(date)))
get_pmids_date <- function(con_mysql = "0", lastupdate, table_name = "edgelist_date", date_name = "DatePMID"){
qry <- paste0("SELECT * FROM ",table_name," WHERE ",date_name," > '",lastupdate,"';")
#res <- dbGetQuery(con_mysql, qry)
}
get_pmids_date(0,isDate(date))
res <- get_pmids_date(0,isDate(date))
print(res)
conMysql <- "1"
lastUpdate <- "500-50-50"
tableName <- "edgelist_date"
dateName <- "datePMID"
mysqlOperator <- "<"
res <- get_pmids_date()
get_pmids_date(1)
get_pmids_date <- function(conMysql, lastUpdate, tableName = "edgelist_date", dateName = "DatePMID", mysqlOperator = "<"){
qry <- paste0("SELECT * FROM ",tableName," WHERE ",dateName," " ,mysqlOperators," '",lastUpdate,"';")
res <- dbGetQuery(conMysql, qry)
}
res <- get_pmids_date()
get_pmids_date <- function(conMysql, lastUpdate, tableName = "edgelist_date", dateName = "DatePMID", mysqlOperator = "<"){
qry <- paste0("SELECT * FROM ",tableName," WHERE ",dateName," " ,mysqlOperator," '",lastUpdate,"';")
res <- dbGetQuery(conMysql, qry)
}
res <- get_pmids_date()
res <- get_pmids_date(,"bob")
get_pmids_date <- function(conMysql, lastUpdate, tableName = "edgelist_date", dateName = "DatePMID", mysqlOperator = "<"){
qry <- paste0("SELECT * FROM ",tableName," WHERE ",dateName," " ,mysqlOperator," '",lastUpdate,"';")
#res <- dbGetQuery(conMysql, qry)
}
res <- get_pmids_date(,"bob")
print(res)
res <- get_pmids_date(,"2009-01-30")
print(res)
pmids <- c(21876761)
pmids1 <- c(21876761, 311, 29463753, 21876726)
combinetest <- cbind(pmids,pmids1)
View(combinetest)
combinetest <- rbind(pmids,pmids1)
View(combinetest)
library(devtools)
devtools::load_all("/home/mz/pmc2nc/")
roxygen2::roxygenise()
